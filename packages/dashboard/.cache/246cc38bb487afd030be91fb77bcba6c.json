{"id":"node_modules/@chaosmachine/chaos.js/lib/machine/audio/index.js","dependencies":[{"name":"/Users/osarrouy/Documents/devs/dapps/@distributedgallery/@chaosmachine/packages/dashboard/node_modules/@chaosmachine/chaos.js/package.json","includedInParent":true,"mtime":1535727511817},{"name":"/Users/osarrouy/Documents/devs/dapps/@distributedgallery/@chaosmachine/packages/dashboard/package.json","includedInParent":true,"mtime":1535727539307},{"name":"/Users/osarrouy/Documents/devs/dapps/@distributedgallery/@chaosmachine/packages/dashboard/.babelrc","includedInParent":true,"mtime":1533206516246},{"name":"/Users/osarrouy/Documents/devs/dapps/@distributedgallery/@chaosmachine/packages/dashboard/node_modules/@chaosmachine/chaos.js/.babelrc","includedInParent":true,"mtime":499162500000},{"name":"process-exists","loc":{"line":6,"column":49},"parent":"/Users/osarrouy/Documents/devs/dapps/@distributedgallery/@chaosmachine/packages/dashboard/node_modules/@chaosmachine/chaos.js/lib/machine/audio/index.js","resolved":"/Users/osarrouy/Documents/devs/dapps/@distributedgallery/@chaosmachine/packages/dashboard/node_modules/process-exists/index.js"},{"name":"sound-player","loc":{"line":7,"column":47},"parent":"/Users/osarrouy/Documents/devs/dapps/@distributedgallery/@chaosmachine/packages/dashboard/node_modules/@chaosmachine/chaos.js/lib/machine/audio/index.js","resolved":"/Users/osarrouy/Documents/devs/dapps/@distributedgallery/@chaosmachine/packages/dashboard/node_modules/sound-player/index.js"},{"name":"process","parent":"/Users/osarrouy/Documents/devs/dapps/@distributedgallery/@chaosmachine/packages/dashboard/node_modules/@chaosmachine/chaos.js/lib/machine/audio/index.js","resolved":"/Users/osarrouy/Documents/devs/dapps/@distributedgallery/@chaosmachine/packages/dashboard/node_modules/process/browser.js"}],"generated":{"js":"var process = require(\"process\");\n\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst process_exists_1 = __importDefault(require(\"process-exists\"));\nconst sound_player_1 = __importDefault(require(\"sound-player\"));\nclass Audio {\n    constructor(machine) {\n        this.machine = machine;\n        this.player = new sound_player_1.default({ player: 'mpg123', filename: '' });\n    }\n    async shuffle() {\n        const hash = await this.machine.contract.shuffle();\n        this.machine.log.info('Shuffling', { track: hash });\n        this.play(hash);\n        return hash;\n    }\n    async play(hash) {\n        if (!this.machine.track.exists(hash)) {\n            await this.machine.track.download(hash);\n        }\n        if (typeof this.player.process !== 'undefined' && await process_exists_1.default(this.player.process.pid)) {\n            process.kill(this.player.process.pid);\n        }\n        this.machine.log.info('Playing', { track: hash });\n        this.player.play({ player: 'mpg123', filename: this.machine.track.path(hash) });\n    }\n}\nexports.default = Audio;\n","map":{"mappings":[{"source":"node_modules/@chaosmachine/chaos.js/lib/machine/audio/index.js","original":{"line":1,"column":0},"generated":{"line":2,"column":0}},{"source":"node_modules/@chaosmachine/chaos.js/lib/machine/audio/index.js","original":{"line":2,"column":0},"generated":{"line":3,"column":0}},{"source":"node_modules/@chaosmachine/chaos.js/lib/machine/audio/index.js","original":{"line":3,"column":0},"generated":{"line":4,"column":0}},{"source":"node_modules/@chaosmachine/chaos.js/lib/machine/audio/index.js","original":{"line":4,"column":0},"generated":{"line":5,"column":0}},{"source":"node_modules/@chaosmachine/chaos.js/lib/machine/audio/index.js","original":{"line":5,"column":0},"generated":{"line":6,"column":0}},{"source":"node_modules/@chaosmachine/chaos.js/lib/machine/audio/index.js","original":{"line":6,"column":0},"generated":{"line":7,"column":0}},{"source":"node_modules/@chaosmachine/chaos.js/lib/machine/audio/index.js","original":{"line":7,"column":0},"generated":{"line":8,"column":0}},{"source":"node_modules/@chaosmachine/chaos.js/lib/machine/audio/index.js","original":{"line":8,"column":0},"generated":{"line":9,"column":0}},{"source":"node_modules/@chaosmachine/chaos.js/lib/machine/audio/index.js","original":{"line":9,"column":0},"generated":{"line":10,"column":0}},{"source":"node_modules/@chaosmachine/chaos.js/lib/machine/audio/index.js","original":{"line":10,"column":0},"generated":{"line":11,"column":0}},{"source":"node_modules/@chaosmachine/chaos.js/lib/machine/audio/index.js","original":{"line":11,"column":0},"generated":{"line":12,"column":0}},{"source":"node_modules/@chaosmachine/chaos.js/lib/machine/audio/index.js","original":{"line":12,"column":0},"generated":{"line":13,"column":0}},{"source":"node_modules/@chaosmachine/chaos.js/lib/machine/audio/index.js","original":{"line":13,"column":0},"generated":{"line":14,"column":0}},{"source":"node_modules/@chaosmachine/chaos.js/lib/machine/audio/index.js","original":{"line":14,"column":0},"generated":{"line":15,"column":0}},{"source":"node_modules/@chaosmachine/chaos.js/lib/machine/audio/index.js","original":{"line":15,"column":0},"generated":{"line":16,"column":0}},{"source":"node_modules/@chaosmachine/chaos.js/lib/machine/audio/index.js","original":{"line":16,"column":0},"generated":{"line":17,"column":0}},{"source":"node_modules/@chaosmachine/chaos.js/lib/machine/audio/index.js","original":{"line":17,"column":0},"generated":{"line":18,"column":0}},{"source":"node_modules/@chaosmachine/chaos.js/lib/machine/audio/index.js","original":{"line":18,"column":0},"generated":{"line":19,"column":0}},{"source":"node_modules/@chaosmachine/chaos.js/lib/machine/audio/index.js","original":{"line":19,"column":0},"generated":{"line":20,"column":0}},{"source":"node_modules/@chaosmachine/chaos.js/lib/machine/audio/index.js","original":{"line":20,"column":0},"generated":{"line":21,"column":0}},{"source":"node_modules/@chaosmachine/chaos.js/lib/machine/audio/index.js","original":{"line":21,"column":0},"generated":{"line":22,"column":0}},{"source":"node_modules/@chaosmachine/chaos.js/lib/machine/audio/index.js","original":{"line":22,"column":0},"generated":{"line":23,"column":0}},{"source":"node_modules/@chaosmachine/chaos.js/lib/machine/audio/index.js","original":{"line":23,"column":0},"generated":{"line":24,"column":0}},{"source":"node_modules/@chaosmachine/chaos.js/lib/machine/audio/index.js","original":{"line":24,"column":0},"generated":{"line":25,"column":0}},{"source":"node_modules/@chaosmachine/chaos.js/lib/machine/audio/index.js","original":{"line":25,"column":0},"generated":{"line":26,"column":0}},{"source":"node_modules/@chaosmachine/chaos.js/lib/machine/audio/index.js","original":{"line":26,"column":0},"generated":{"line":27,"column":0}},{"source":"node_modules/@chaosmachine/chaos.js/lib/machine/audio/index.js","original":{"line":27,"column":0},"generated":{"line":28,"column":0}},{"source":"node_modules/@chaosmachine/chaos.js/lib/machine/audio/index.js","original":{"line":28,"column":0},"generated":{"line":29,"column":0}},{"source":"node_modules/@chaosmachine/chaos.js/lib/machine/audio/index.js","original":{"line":29,"column":0},"generated":{"line":30,"column":0}},{"source":"node_modules/@chaosmachine/chaos.js/lib/machine/audio/index.js","original":{"line":30,"column":0},"generated":{"line":31,"column":0}},{"source":"node_modules/@chaosmachine/chaos.js/lib/machine/audio/index.js","original":{"line":31,"column":0},"generated":{"line":32,"column":0}}],"sources":{"node_modules/@chaosmachine/chaos.js/lib/machine/audio/index.js":"\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst process_exists_1 = __importDefault(require(\"process-exists\"));\nconst sound_player_1 = __importDefault(require(\"sound-player\"));\nclass Audio {\n    constructor(machine) {\n        this.machine = machine;\n        this.player = new sound_player_1.default({ player: 'mpg123', filename: '' });\n    }\n    async shuffle() {\n        const hash = await this.machine.contract.shuffle();\n        this.machine.log.info('Shuffling', { track: hash });\n        this.play(hash);\n        return hash;\n    }\n    async play(hash) {\n        if (!this.machine.track.exists(hash)) {\n            await this.machine.track.download(hash);\n        }\n        if (typeof this.player.process !== 'undefined' && await process_exists_1.default(this.player.process.pid)) {\n            process.kill(this.player.process.pid);\n        }\n        this.machine.log.info('Playing', { track: hash });\n        this.player.play({ player: 'mpg123', filename: this.machine.track.path(hash) });\n    }\n}\nexports.default = Audio;\n"},"lineCount":32}},"hash":"9264edecc92c91c8896bca73935beb63","cacheData":{"env":{}}}